<!doctype html>
<html lang="zh-CN">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>åªç»™ä½ çš„å°ä¸–ç•Œ</title>
  <meta name="robots" content="noindex,nofollow" />
  <style>
    :root{
      --bg1:#0b1020;
      --bg2:#2b1055;
      --card:#ffffff10;
      --border:#ffffff22;
      --text:#f7f7fb;
      --muted:#c9c9d6;
      --accent:#ff5da2;
      --accent2:#ffd6e7;
      --shadow: 0 18px 50px #00000055;
      --r: 20px;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family: ui-sans-serif, system-ui, -apple-system, "PingFang SC","Microsoft YaHei", Arial;
      color:var(--text);
      background:
        radial-gradient(1200px 800px at 20% 10%, #ff5da228, transparent 55%),
        radial-gradient(900px 600px at 80% 30%, #7c3aed25, transparent 55%),
        linear-gradient(140deg, var(--bg1), var(--bg2));
      display:flex;
      align-items:center;
      justify-content:center;
      padding:18px;
      overflow:hidden;
    }

    /* stars */
    .stars, .stars:before, .stars:after{
      position:fixed; inset:0;
      content:"";
      background-repeat:repeat;
      background-size: 220px 220px;
      opacity:.35;
      pointer-events:none;
      mix-blend-mode: screen;
      z-index: 0;
    }
    .stars{
      background-image:
        radial-gradient(#ffffff55 1px, transparent 1px),
        radial-gradient(#ffffff33 1px, transparent 1px);
      background-position: 0 0, 80px 120px;
      animation: drift 42s linear infinite;
    }
    .stars:before{
      background-image: radial-gradient(#ffffff33 1px, transparent 1px);
      background-size: 260px 260px;
      background-position: 50px 70px;
      animation: drift 66s linear infinite reverse;
      opacity:.25;
    }
    .stars:after{
      background-image: radial-gradient(#ff5da255 1px, transparent 1px);
      background-size: 320px 320px;
      background-position: 140px 30px;
      animation: drift 92s linear infinite;
      opacity:.18;
    }
    @keyframes drift{
      from{transform:translate3d(0,0,0)}
      to{transform:translate3d(-220px,-220px,0)}
    }

    .wrap{
      width:min(520px, 94vw);
      position:relative;
      z-index: 1;
    }
    .card{
      background: linear-gradient(180deg, #ffffff14, #ffffff08);
      border:1px solid var(--border);
      border-radius: var(--r);
      box-shadow: var(--shadow);
      padding: 18px 18px 16px;
      backdrop-filter: blur(10px);
    }
    .top{
      display:flex;
      align-items:center;
      gap:10px;
      margin-bottom:10px;
    }
    .dot{
      width:10px;height:10px;border-radius:999px;
      background:var(--accent);
      box-shadow: 0 0 18px #ff5da2aa;
    }
    h1{
      margin: 6px 0 6px;
      font-size: 20px;
      letter-spacing:.3px;
      line-height:1.2;
    }
    p{
      margin: 0 0 14px;
      color: var(--muted);
      line-height: 1.75;
      font-size: 14px;
    }

    .field{
      display:flex;
      gap:10px;
      align-items:stretch;
      margin-top: 8px;
    }
    .inputWrap{
      flex:1;
      position:relative;
    }
    input{
      width:100%;
      padding: 12px 42px 12px 12px;
      border-radius: 14px;
      border:1px solid #ffffff26;
      outline:none;
      background:#00000025;
      color:#fff;
      font-size: 14px;
    }
    .eye{
      position:absolute;
      right:10px; top:50%;
      transform: translateY(-50%);
      width:28px;height:28px;
      border-radius:10px;
      border:1px solid #ffffff24;
      background:#ffffff10;
      color:#fff;
      cursor:pointer;
      display:flex;
      align-items:center;
      justify-content:center;
      font-weight:900;
      user-select:none;
    }
    button{
      padding: 12px 14px;
      border-radius: 14px;
      border:0;
      cursor:pointer;
      font-weight: 900;
      color:#0b1020;
      background: linear-gradient(90deg, var(--accent), #ffb4d6);
      box-shadow: 0 12px 30px #ff5da230;
      transition: transform .08s ease, filter .2s ease;
      white-space:nowrap;
    }
    button:hover{filter:brightness(1.05)}
    button:active{transform: translateY(1px) scale(.99)}
    button:disabled{
      opacity:.55;
      cursor:not-allowed;
      filter:none;
      transform:none;
      box-shadow:none;
    }

    .err{
      margin-top:10px;
      color:#ffb4d6;
      display:none;
      font-size: 13px;
    }
    .ok{
      margin-top:10px;
      color:#b9ffdc;
      display:none;
      font-size: 13px;
    }
    .hint{
      margin-top:10px;
      color:#ffffffb0;
      font-size:12px;
      line-height:1.65;
    }
    .small{
      opacity:.8;
      font-size:12px;
      margin-top:14px;
      display:flex;
      justify-content:space-between;
      gap:10px;
      flex-wrap:wrap;
      color:#ffffffa8;
    }

    /* subtle floating hearts */
    .heart{
      position:fixed;
      left:0; top:-20px;
      width:14px; height:14px;
      transform: rotate(45deg);
      background: var(--accent);
      opacity:.20;
      pointer-events:none;
      filter: drop-shadow(0 8px 10px #00000030);
      animation: fall linear forwards;
      z-index: 0;
    }
    .heart:before, .heart:after{
      content:"";
      position:absolute;
      width:14px; height:14px;
      border-radius:50%;
      background: inherit;
    }
    .heart:before{left:-7px; top:0}
    .heart:after{left:0; top:-7px}
    @keyframes fall{
      to{
        transform: translate3d(var(--dx), 105vh, 0) rotate(45deg);
        opacity:0;
      }
    }
    @media (max-width: 420px){
      .small{justify-content:flex-start}
    }
  </style>
</head>

<body>
  <div class="stars"></div>

  <div class="wrap">
    <div class="card">
      <div class="top">
        <span class="dot"></span>
        <div>
          <h1>åªç»™ä½ çš„å°ä¸–ç•Œ ğŸ’—</h1>
          <p style="margin:0;">è¯·è¾“å…¥å¯†ç è¿›å…¥ï¼ˆä¸å¯¹çš„å¯†ç ä¼šè¢«æ¸©æŸ”æ‹’ç»ï¼‰ã€‚</p>
        </div>
      </div>

      <div class="field">
        <div class="inputWrap">
          <input id="pwd" type="password" inputmode="numeric" placeholder="è¯·è¾“å…¥å¯†ç " autocomplete="off" />
          <div class="eye" id="eye" title="æ˜¾ç¤º/éšè—">ğŸ‘</div>
        </div>
        <button id="go" type="button">è¿›å…¥</button>
      </div>

      <div class="err" id="err">å¯†ç ä¸å¯¹å“¦ï¼Œå†è¯•ä¸€æ¬¡ã€‚</div>
      <div class="ok" id="ok">éªŒè¯é€šè¿‡ï¼Œæ­£åœ¨æ‰“å¼€â€¦</div>

      <div class="hint" id="hint">
        å°æç¤ºï¼šæ‰‹æœºé”®ç›˜é®æŒ¡è¾“å…¥æ¡†æ—¶ï¼Œç‚¹ä¸€ä¸‹ç©ºç™½å¤„å†è¾“å…¥ã€‚<br>
        è¿ç»­è¾“é”™æ¬¡æ•°è¿‡å¤šä¼šçŸ­æš‚å†·å´ä¸€ä¸‹ã€‚
      </div>

      <div class="small">
        <span>Made with â¤</span>
        <span id="cooldown" style="display:none;">å†·å´ä¸­â€¦</span>
      </div>
    </div>
  </div>

  <script>
    // ================== é…ç½®åŒº ==================
    const TARGET = "app.html"; // ä½ çš„çœŸå®é¡µé¢æ–‡ä»¶åï¼ˆåŸæƒ…ä¹¦é¡µé¢ï¼‰
    // âœ… å¯†ç  0502 çš„ SHA-256ï¼ˆä¸æ˜¯æ˜æ–‡å¯†ç ï¼‰
    const PASS_HASH_HEX = "a1133c2be1ac92a059e8345f2e6bd946d171d43c76ae442a2d744cb624c8b37a";
    // ==========================================

    // å·²é€šè¿‡åˆ™ç›´æ¥è¿›ï¼ˆåŒä¸€æ ‡ç­¾é¡µæœ‰æ•ˆï¼‰
    if (sessionStorage.getItem("love_pwd_ok") === "1") {
      location.replace(TARGET);
    }

    const pwdEl = document.getElementById("pwd");
    const errEl = document.getElementById("err");
    const okEl  = document.getElementById("ok");
    const goBtn = document.getElementById("go");
    const eyeBtn = document.getElementById("eye");
    const cdEl = document.getElementById("cooldown");

    // é˜²æš´åŠ›çŒœï¼šé”™ 5 æ¬¡å†·å´ 12 ç§’
    const MAX_FAIL = 5;
    const COOLDOWN_MS = 12000;

    function now(){ return Date.now(); }
    function getFail(){ return Number(localStorage.getItem("love_fail") || "0"); }
    function setFail(n){ localStorage.setItem("love_fail", String(n)); }
    function getCDUntil(){ return Number(localStorage.getItem("love_cd_until") || "0"); }
    function setCDUntil(t){ localStorage.setItem("love_cd_until", String(t)); }

    function setState({err=false, ok=false, msg=""}){
      errEl.style.display = err ? "block" : "none";
      okEl.style.display = ok ? "block" : "none";
      if (msg && err) errEl.textContent = msg;
      if (msg && ok) okEl.textContent = msg;
    }

    async function sha256Hex(s){
      const buf = await crypto.subtle.digest("SHA-256", new TextEncoder().encode(s));
      return [...new Uint8Array(buf)].map(b => b.toString(16).padStart(2,"0")).join("");
    }

    function updateCooldownUI(){
      const until = getCDUntil();
      const remain = until - now();
      if (remain > 0) {
        const sec = Math.ceil(remain / 1000);
        cdEl.style.display = "inline";
        cdEl.textContent = `å†·å´ä¸­ ${sec}sâ€¦`;
        goBtn.disabled = true;
        return true;
      } else {
        cdEl.style.display = "none";
        goBtn.disabled = false;
        return false;
      }
    }

    // æ¯ 200ms åˆ·æ–°å†·å´æ˜¾ç¤ºï¼ˆå¼€é”€å¾ˆå°ï¼‰
    setInterval(updateCooldownUI, 200);
    updateCooldownUI();

    function ok(){
      setState({ok:true, err:false, msg:"éªŒè¯é€šè¿‡ï¼Œæ­£åœ¨æ‰“å¼€â€¦"});
      sessionStorage.setItem("love_pwd_ok", "1");
      // æˆåŠŸå°±æ¸…ç©ºå¤±è´¥è®¡æ•°
      setFail(0);
      setCDUntil(0);
      setTimeout(()=> location.href = TARGET, 250);
    }

    function bad(customMsg){
      const fails = getFail() + 1;
      setFail(fails);

      if (fails >= MAX_FAIL) {
        const until = now() + COOLDOWN_MS;
        setCDUntil(until);
        setState({err:true, ok:false, msg:`è¾“é”™æ¬¡æ•°æœ‰ç‚¹å¤šå“¦ï¼Œç­‰ ${Math.ceil(COOLDOWN_MS/1000)} ç§’å†è¯•ï½`});
        updateCooldownUI();
      } else {
        setState({err:true, ok:false, msg: customMsg || `å¯†ç ä¸å¯¹å“¦ï¼ˆè¿˜å‰© ${MAX_FAIL - fails} æ¬¡ï¼‰`});
      }

      pwdEl.value = "";
      pwdEl.focus();
    }

    async function check(){
      if (updateCooldownUI()) return;

      const v = (pwdEl.value || "").trim();
      if (!v) return bad("å…ˆè¾“å…¥å¯†ç å†è¿›å…¥å“¦ï½");

      try{
        const h = await sha256Hex(v);
        if (h === PASS_HASH_HEX) ok();
        else bad();
      }catch(e){
        bad("æµè§ˆå™¨ä¸æ”¯æŒåŠ å¯†æ ¡éªŒï¼ˆæ¢ Chrome/Edge è¯•è¯•ï¼‰");
      }
    }

    goBtn.addEventListener("click", check);
    pwdEl.addEventListener("keydown", (e)=>{ if(e.key === "Enter") check(); });

    eyeBtn.addEventListener("click", ()=>{
      pwdEl.type = (pwdEl.type === "password") ? "text" : "password";
      pwdEl.focus();
    });

    // è½»é‡é£˜å¿ƒï¼ˆä¸æŠ¢æ€§èƒ½ï¼‰
    function spawnHeart(){
      const h = document.createElement("div");
      h.className = "heart";
      const x = Math.random() * window.innerWidth;
      const dx = (Math.random() * 2 - 1) * 120 + "px";
      const dur = (Math.random()*2.2 + 3.2).toFixed(2) + "s";
      h.style.left = x + "px";
      h.style.setProperty("--dx", dx);
      h.style.animationDuration = dur;
      document.body.appendChild(h);
      setTimeout(()=>h.remove(), (parseFloat(dur)+0.2)*1000);
    }
    // æ‰‹æœºæ›´å°‘ä¸€ç‚¹
    const isMobile = window.matchMedia("(max-width: 520px)").matches;
    setInterval(spawnHeart, isMobile ? 1500 : 950);
  </script>
</body>
</html>
